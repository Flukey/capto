<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Capto : Mail catcher for NodeJs">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Capto</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jamhall/capto">View on GitHub</a>

          <h1 id="project_title">Capto</h1>
          <h2 id="project_tagline">Mail catcher for NodeJs</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jamhall/capto/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jamhall/capto/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="development-email-testing-made-easy" class="anchor" href="#development-email-testing-made-easy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Development email testing made easy</h2>

<p>Capto runs a simple SMTP server that captures any message sent to it, persists it into a mongodb collection and displays it in a web interface.  No messages are relayed to any email addresses. The backend is written in NodeJs using the Express framework and the frontend is driven by ExtJs 5.</p>

<p><img src="https://raw.githubusercontent.com/jamhall/capto/master/docs/screenshots/screenshot.png" alt="Screenshot"></p>

<p><a href="https://nodei.co/npm/capto/"><img src="https://nodei.co/npm/capto.png" alt="NPM"></a></p>

<h3>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h3>

<ul>
<li>Catches all mail and stores it for display.</li>
<li>Display inline images</li>
<li>Get notified when a new message arrives via websockets and browser desktop notifications</li>
<li>Display attachment images in lightbox popup</li>
<li>Displays recipients and CCs</li>
<li>Display headers</li>
<li>Keyboard navigation between messages</li>
<li>Full text searching for messages</li>
<li>Shows HTML, Plain Text and Source version of messages, as applicable.</li>
<li>List attachments and download each attachment</li>
<li>Download email source</li>
<li>Open an email in a new tab (like thunderbird)</li>
<li>Post an <em>eml</em> file via the API and view it in the interface</li>
<li>Mark as read, delete messages and navigate messages via pagination controls</li>
<li>RESTful API (please see below for more information)</li>
</ul>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

<blockquote>
<p>Capto requires a MongoDB instance. If you wish to have full text search working, you will need to be running Mongo 2.6 or greater.</p>
</blockquote>

<p>To get started, install capto (may require sudo privileges):</p>

<pre><code>npm install -g capto
</code></pre>

<p>Change directory to the <em>node modules</em> directory:</p>

<pre><code>cd /usr/local/lib/node_modules/capto/app/config/
</code></pre>

<p>Copy the <em>settings.js.example</em> to <em>settings.js</em>. Modify the settings to match your requirements</p>

<p>To run the HTTP and SMTP server with the default options:</p>

<pre><code>capto run
</code></pre>

<p>There are a few options you can set:</p>

<pre><code>  Usage: run [options]

  Options:

    -h, --help                 output usage information
    --smtp-ip [address]        Set the ip address for the http server
    --http-ip [address]        Set the ip address for the smtp server
    --smtp-port [port]         Set the port of the smtp server
    --http-port [port]         Set the port of the http server
    --max-message-size [size]  Set the max message size the smtp server will accept in bytes
</code></pre>

<p>Now open: http://localhost:9024 to view the web interface. Send messages to <em>smtp://127.0.0.1:9025</em>.</p>

<blockquote>
<p>Please note: The max message size is 10mb.  You can reduce this limit by setting the appropriate option either via the command line options or in the settings file</p>
</blockquote>

<h3>
<a id="configuring-a-mail-library-to-send-messages-to-capto" class="anchor" href="#configuring-a-mail-library-to-send-messages-to-capto" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring a mail library to send messages to capto</h3>

<h4>
<a id="django" class="anchor" href="#django" aria-hidden="true"><span class="octicon octicon-link"></span></a>Django</h4>

<p>For use in Django, simply add the following configuration to your projects' settings.py</p>

<pre><code>if DEBUG:
    EMAIL_HOST = '127.0.0.1'
    EMAIL_HOST_USER = ''
    EMAIL_HOST_PASSWORD = ''
    EMAIL_PORT = 9025
    EMAIL_USE_TLS = False
</code></pre>

<h4>
<a id="nodejs" class="anchor" href="#nodejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>NodeJs</h4>

<p>Using <a href="https://github.com/andris9/Nodemailer">Node mailer</a></p>

<pre><code>var nodemailer = require('nodemailer');
var smtpTransport = require('nodemailer-smtp-transport');
var transporter = nodemailer.createTransport(smtpTransport({
  host: 'localhost',
  port: 9025,
  secure: false,
  debug: true,
  ignoreTLS: true
}));
</code></pre>

<h4>
<a id="rails" class="anchor" href="#rails" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rails</h4>

<p>To set up your rails app, I recommend adding this to your environments/development.rb:</p>

<pre><code>config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = { :address =&gt; "localhost", :port =&gt; 9025 }
</code></pre>

<h3>
<a id="contributions" class="anchor" href="#contributions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributions</h3>

<p>All contributions and bug reports are very welcome!</p>

<h3>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h3>

<p>The backend exposes a RESTful API:</p>

<table>
<thead>
<tr>
<th>Route</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>/messages</td>
<td>GET</td>
<td>Get all messages</td>
</tr>
<tr>
<td>/messages</td>
<td>DELETE</td>
<td>Delete all messages</td>
</tr>
<tr>
<td>/messages</td>
<td>POST</td>
<td>Create a message</td>
</tr>
<tr>
<td>/messages/{id}</td>
<td>GET</td>
<td>Get a single message</td>
</tr>
<tr>
<td>/messages/{id}</td>
<td>DELETE</td>
<td>Delete a message</td>
</tr>
<tr>
<td>/messages/{id}/source</td>
<td>GET</td>
<td>Get the source of a message</td>
</tr>
<tr>
<td>/messages/{id}/source.eml</td>
<td>GET</td>
<td>Download the source of a message</td>
</tr>
<tr>
<td>/messages/{id}/html</td>
<td>GET</td>
<td>Get the html of a message</td>
</tr>
<tr>
<td>/messages/{id}/source</td>
<td>GET</td>
<td>Get the plain text of a message</td>
</tr>
<tr>
<td>/messages/{id}/attachments/{attachmentId}</td>
<td>GET</td>
<td>Get an attachment (to download append ?download to the URL)</td>
</tr>
<tr>
<td>/messages/{id}/headers</td>
<td>GET</td>
<td>Get the headers for a message (for a html representation append ?html to the URL)</td>
</tr>
</tbody>
</table>

<h3>
<a id="thanks" class="anchor" href="#thanks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Thanks</h3>

<p>Many thanks to <a href="https://github.c/sj26">sj26</a> for his excellent <a href="https://github.com/sj26/mailcatcher">mailcatcher</a> project for the inspiration for this project.</p>

<p>Many thanks also goes to the many developers who have contributed to the various libraries used in this project.</p>

<h3>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h3>

<p>GPLv3. See LICENSE file in the source.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Capto maintained by <a href="https://github.com/jamhall">jamhall</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
