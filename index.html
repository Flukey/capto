<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Capto : Mail catcher for NodeJs">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Capto</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jamhall/capto">View on GitHub</a>

          <h1 id="project_title">Capto</h1>
          <h2 id="project_tagline">Mail catcher for NodeJs</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jamhall/capto/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jamhall/capto/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h4>
<a id="development-email-testing-made-easy" class="anchor" href="#development-email-testing-made-easy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Development email testing made easy</h4>

<p>Capto runs a simple SMTP server that captures any messages sent to it and displays it in a web interface.  No messages are relayed to any email addresses.</p>

<p><img src="https://raw.githubusercontent.com/Flukey/capto/master/docs/screenshots/screenshot.png" alt="Screenshot"></p>

<blockquote>
<p>This project is under active development and may contain bugs. Feedback is very welcome. All contributions are also very welcome.</p>
</blockquote>

<p><a href="https://nodei.co/npm/capto/"><img src="https://nodei.co/npm/capto.png" alt="NPM"></a></p>

<h4>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h4>

<ul>
<li>Catches all mail and stores it for display.</li>
<li>Display inline images</li>
<li>Get notified when a new message arrives via websockets and browser desktop notifications</li>
<li>Display attachment images in lightbox popup</li>
<li>Displays recipients and CCs</li>
<li>Display headers</li>
<li>Keyboard navigation between messages</li>
<li>Full text searching for messages</li>
<li>Shows HTML, Plain Text and Source version of messages, as applicable.</li>
<li>List attachments and download each attachment</li>
<li>Download email source</li>
<li>Open an email in a new tab (like thunderbird)</li>
<li>Post an <em>eml</em> file via the API and view it in the interface</li>
<li>Mark as read, delete messages and navigate messages via pagination controls</li>
</ul>

<p>The backend is written in NodeJs using the Express framework and the frontend is driven by ExtJs 5.</p>

<h4>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h4>

<p>The backend exposes a RESTful API:</p>

<table>
<thead>
<tr>
<th>Route</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>/messages</td>
<td>GET</td>
<td>Get all messages</td>
</tr>
<tr>
<td>/messages</td>
<td>DELETE</td>
<td>Delete all messages</td>
</tr>
<tr>
<td>/messages</td>
<td>POST</td>
<td>Create a message</td>
</tr>
<tr>
<td>/messages/{id}</td>
<td>GET</td>
<td>Get a single message</td>
</tr>
<tr>
<td>/messages/{id}</td>
<td>DELETE</td>
<td>Delete a message</td>
</tr>
<tr>
<td>/messages/{id}/source</td>
<td>GET</td>
<td>Get the source of a message</td>
</tr>
<tr>
<td>/messages/{id}/source.eml</td>
<td>GET</td>
<td>Download the source of a message</td>
</tr>
<tr>
<td>/messages/{id}/html</td>
<td>GET</td>
<td>Get the html of a message</td>
</tr>
<tr>
<td>/messages/{id}/source</td>
<td>GET</td>
<td>Get the plain text of a message</td>
</tr>
<tr>
<td>/messages/{id}/attachments/{attachmentId}</td>
<td>GET</td>
<td>Get an attachment (to download append ?download to the URL)</td>
</tr>
<tr>
<td>/messages/{id}/headers</td>
<td>GET</td>
<td>Get the headers for a message (for a html representation append ?html to the URL)</td>
</tr>
</tbody>
</table>

<h4>
<a id="to-do" class="anchor" href="#to-do" aria-hidden="true"><span class="octicon octicon-link"></span></a>To do</h4>

<ul>
<li>Write tests in Mocha</li>
<li><del>Implement Google Chrome notification API when a new message is received</del></li>
<li><del>Implement web sockets for when a new message is received?</del></li>
<li><del>Open images in a lightbox</del></li>
<li><del>Implement full text search</del></li>
<li>Implement column sorting (received, subject etc.)</li>
<li><del>Implement CLI entry point (.ie. bin/capto)</del></li>
</ul>

<h4>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h4>

<blockquote>
<p>Capto requires a MySQL database. The code project was originally designed to use SQLite, however, due to nodes asynchronous nature,  database writes were failing when multiple requests were sent in quick succession. </p>
</blockquote>

<p>To get started, install capto (may require sudo privileges):</p>

<pre><code>npm install -g capto
</code></pre>

<p>Change directory to the <em>node modules</em> directory:</p>

<pre><code>cd /usr/local/lib/node_modules/capto/app/config/
</code></pre>

<p>Copy the <em>settings.js.example</em> to <em>settings.js</em></p>

<p>Change the settings to your MySQL database (make sure you've created the database). Then run:</p>

<pre><code>capto db:setup
</code></pre>

<p>Your database should now be ready. To run the HTTP and SMTP server run:</p>

<pre><code>capto run
</code></pre>

<p>Now open: http://localhost:9024 to view the web interface. Send messages to <em>smtp://127.0.0.1:9025</em>.</p>

<blockquote>
<p>Please note: The default max message size is 25mb. You can send a message greater than this value and the SMTP server will accept it, however, once processed it will be rejected and will not be persisted to the database. You can increase or decrease this default value in the <em>settings.js</em> file or pass in the option <em>--max-message-length</em> when running the <em>capto run</em> command.</p>
</blockquote>

<p>The <em>capto run</em> command offers a few options:</p>

<pre><code>  capto run --help

  Usage: run [options]

  Options:

    -h, --help                 output usage information
    --smtp-ip [address]        Set the ip address for the http server
    --http-ip [address]        Set the ip address for the smtp server
    --smtp-port [port]         Set the port of the smtp server
    --http-port [port]         Set the port of the http server
    --max-message-size [size]  Set the max message size the smtp server will accept in bytes
</code></pre>

<h4>
<a id="thanks" class="anchor" href="#thanks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Thanks</h4>

<p>Many thanks to <a href="https://github.c/sj26">sj26</a> for his excellent <a href="https://github.com/sj26/mailcatcher">mailcatcher</a> project for the inspiration for this project.</p>

<p>Many thanks also goes to the many developers who have contributed to the various libraries used in this project.</p>

<h4>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h4>

<p>GPLv3. See LICENSE file in the source.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Capto maintained by <a href="https://github.com/jamhall">jamhall</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
